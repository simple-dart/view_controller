# Simple Dart View Controller

Библиотека для создания single page application на Dart.

Читать на других языках: [English](README.md), [Русский](README.ru.md).

## ViewController

ViewController - контроллер для управления View. Как и все контроллеры создаётся и инициализируется во время старта
приложения. Вызывается через глобальную переменную viewController.
Подписывается на события изменения window.onHashChange и меняет View.

### Методы ViewController

- openView(AbstractView) - показывает View.
- openPath(String) - показывает View по url.
- saveState(Map<String, String> newState) - сохраняет состояние в window.location.hash и при этом не вызывает
  переинициализацию View.
- generateFullPath(AbstractView view) - генерирует полный путь для View.
- generatePathPart(String id, Map<String, String> params) - генерирует часть пути для View из параметров.

## AbstractView

Абстрактный класс для сменяемых экранов приложения.
В каждом приложении реализуется свой класс наследник AbstractView обязательно называемый View.

Каждый View имеет уникальный id (для навигации через window.location) и caption (для отображения
названия в меню и других компонентах навигации).

Может опционально хранить параметры (params), которые будут переданы при переходе на этот view.
Также может хранить состояние (state), которое будет сохранено при переходе на другой view и восстановлено при возврате
на этот view.
При изменении state состояние url меняется, но не обрабатывается.

View может быть подчиненным (child) другому view. В этом случае при переходе на подчиненный view, будет сначала
инициализированы все родительские View. Подчиненные view имеют доступ к родительским.
Это нужно для:

- Отображения структуры - как текущий View соотносится с другими.
- Легче возвращаться на родительский View.
- Можно оперировать данными родительского View. Например, если родительский View - это список - то на подчиненном View
  могут быть ссылки на предыдущий и следующий элементы списка.

На подчиненный View можно попасть по ссылке типа: #some_parent_view?n=15/some_child_view?name=Bob

Переходы между View должны осуществляться переходами по ссылке или методами openPath(String) и openView(AbstractView).
На View можно попасть по ссылке типа: #some_view?n=15

### Свойства AbstractView

- id - уникальный id (не должна содержать символов зарезервированных для URL)
- caption - человеко читаемый краткий заголовок View по которому понятно назначение этого View.
- parent - родительский View (если есть). View может быть подчиненным(ChildView). ChildView не может существовать без
  родительского View.

- params и state - парсятся из url и передаются в метод init(Map<String, String> params, Map<String, String>? state).
